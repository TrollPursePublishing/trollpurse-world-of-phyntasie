"use strict";var getAsync=function(n,t,i){var r=t.defer();return i.get(n).success(function(n){r.resolve({data:n})}).error(function(n){r.reject(n)}),r.promise},getAsyncData=function(n,t,i,r){var u=i.defer();return r.get(n,t).success(function(n){u.resolve({data:n})}).error(function(n){u.reject(n)}),u.promise},postAsync=function(n,t,i,r){var u=i.defer();return r.post(n,t).success(function(n){u.resolve({data:n})}).error(function(n){u.reject(n)}),u.promise};angular.module("app.services",[]).factory("CommandService",["$http","$q",function(n,t){var i={};return i.submit=function(i,r){var u=t.defer();return n.get("api/Command/"+r+"/"+i).success(function(n){u.resolve({data:n})}).error(function(n){u.reject(n)}),u.promise},i}]).factory("MessageService",["$http","$q","$rootScope","$",function(n,t,i,r){var u={},f;return u.ChatHub={},u.chatConnected=!1,f=null,u.startupServices=function(){r(function(){r('[data-toggle="tooltip"]').tooltip({container:"body"});console.log("Enabling tooltips.")});var n=t.defer();return u.chatConnected||r(function(){u.ChatHub=r.connection.chatHub;u.ChatHub.client.broadcastMessage=function(n,t){console.log("broadcast",n+":"+t);i.$emit("chat",{name:n,msg:t})};u.ChatHub.client.broadcastJoin=function(n){console.log("broadcast",n+":join");i.$emit("playerjoin",{name:n})};r.connection.hub.start().done(function(){u.chatConnected=!0;console.log("signalR","Connected!");n.resolve("success")}).fail(function(){u.chatConnected=!1;console.log("signalR","Not Connected :(");n.reject("failure")})}),n.promise},u.send=function(n,t,i){u.ChatHub.server.send(n,t,i)},u.joinLocation=function(n,t){u.ChatHub.server.joinLocation(n,t)},u.leaveLocation=function(n){u.ChatHub.server.leaveLocation(n)},u}]).factory("NotificationService",["$http","$q",function(n,t){var i={};return i.getEvents=function(){return getAsync("api/message/events",t,n)},i.getPlayerAcheivements=function(i){return getAsync("api/ach/"+i,t,n)},i.getAllPlayerAchievements=function(){return getAsync("api/ach/latest",t,n)},i}]).factory("RanksService",["$http","$q",function(n,t){var i={};return i.get=function(){return getAsync("api/ranks/topten",t,n)},i.getById=function(i){return getAsync("api/ranks/"+i,t,n)},i.getAll=function(){return getAsync("api/ranks/all",t,n)},i}]).factory("AccountService",["$http","$q",function(n,t){var i={};return i.confirmEmail=function(i,r){return getAsync("api/account/confirm/"+i+"/"+r,t,n)},i.doNotDisturb=function(i){return getAsync("api/account/donotdisturb/"+i,t,n)},i.registerForUpdates=function(i){return postAsync("api/account/sendmail",{playerId:i},t,n)},i.resetPassword=function(i,r,u){return postAsync("api/account/password/confirm",{id:i,password:r,confirmPassword:u},t,n)},i.resetConfirm=function(i,r){return getAsync("api/account/password/"+i+"/"+r,t,n)},i}]).factory("UserService",["$http","$q",function(n,t){var i={};return i.user,i.isLoggedIn=function(){return angular.fromJson(localStorage.aqg_token)!=undefined},i.getId=function(){return angular.fromJson(localStorage.aqg_token).id},i.getUserData=function(){return getAsync("api/player/"+i.getId(),t,n)},i.login=function(t,i){return n.post("/token",$.param({grant_type:"password",username:t,password:i}),{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},i.logout=function(){return postAsync("api/account/logout",{playerId:i.getId()},t,n)},i.register=function(i,r,u,f,e){var o={username:i,password:r,confirmpassword:u,email:f,gender:e};return postAsync("api/account/register",o,t,n)},i.getPlayerData=function(){return getAsync("api/player/"+i.getId(),t,n)},i.reset=function(i){return postAsync("api/account/password/reset",'"'+i+'"',t,n)},i.onLoginSuccess=function(){n.defaults.headers.common.Authorization="Bearer "+angular.fromJson(localStorage.getItem("aqg_token")).access_token},i}]).value("version","0.0.6.8").value("gamename","AdventureQuestGame");
//# sourceMappingURL=services.min.js.map
