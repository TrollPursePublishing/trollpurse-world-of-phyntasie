<nav class="nav navbar navbar-default navbar-fixed-top" style="padding-top:50px; z-index:9;" role="navigation" ng-if=" !layout ">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#gamenavbar" aria-controls="gamenavbar">
                <span class="sr-only">Toggle Stats Menu</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="navbar-brand">
                {{user.FullName}}
            </div>
        </div>
        <div id="gamenavbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="" data-uib-tooltip="Health" data-tooltip-placement="bottom" data-tooltip-trigger="mouseenter">
                        <span><img class="img-responsive" src="/Images/public/icon/heart-beats.png" /></span> {{user.attributes.currentHealth}}/{{user.attributes.health}}
                    </a>
                </li>
                <li>
                    <a href="" data-uib-tooltip="Mana" data-tooltip-placement="bottom" data-tooltip-trigger="mouseenter">
                        <span><img class="img-responsive" src="/Images/public/icon/star-pupil.png" /></span> {{user.attributes.currentMana}} / {{user.attributes.mana}}
                    </a>
                </li>
                <li>
                    <a href="" data-uib-tooltip="Stamina" data-tooltip-placement="bottom" data-tooltip-trigger="mouseenter">
                        <span><img class="img-responsive" src="/Images/public/icon/power-lightning.png" /></span> {{user.attributes.currentStanima}} / {{user.attributes.stanima}}
                    </a>
                </li>
                <li>
                    <a href="" data-uib-tooltip="Strength" data-tooltip-placement="bottom" data-tooltip-trigger="mouseenter">
                        <span><img class="img-responsive" src="/Images/public/icon/muscle-up.png" /></span> {{user.attributes.currentStrength}} / {{user.attributes.strength}}
                    </a>
                </li>
                <li>
                    <a href="" data-uib-tooltip="Toughness" data-tooltip-placement="bottom" data-tooltip-trigger="mouseenter">
                        <span><img class="img-responsive" src="/Images/public/icon/kevlar.png" /></span> {{user.attributes.currentToughness}} / {{user.attributes.toughness}}
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<img class="img-responsive bg-location" data-ng-src="{{user.navigation.currentArea.imagepath}}" />
<div style="padding-top:64px;" class="container-fluid">
    <div class="row">
        <div class="col-xs-6">
            <p data-ng-repeat="message in reverse(messages) track by $index"><b>{{message}}</b></p>
        </div>
        <div class="col-xs-6">
            <div class="row">
                <div class="col-xs-4">
                    <button type="button" class="btn btn-block" data-ng-click="submit('attack')"><img class="img-responsive" src="/Images/public/icon/quick-slash.png"/></button>
                </div>
                <div class="col-xs-4">
                    <div class="dropdown">
                        <button type="button" class="btn dropdown-toggle btn-block" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img class="img-responsive" src="/Images/public/icon/magic-swirl.png"/>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li style="cursor: pointer" data-ng-click="do('cast', spell.name)" data-ng-repeat="spell in user.spells">
                                {{spell.name}}
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-xs-4">
                    <button type="button" class="btn btn-block" data-ng-click="togglemenu()">{{showmenu ? 'Hide ' : 'Show '}} Menu</button>
                </div>
            </div>
            <uib-tabset data-ng-show="showmenu">
                <uib-tab>
                    <uib-tab-heading>
                        <img class="img-responsive" src="/Images/public/icon/treasure-map.png"/> Map
                    </uib-tab-heading>
                    <div class="container-fluid">
                        <div class="row">
                            <h3 class="text-capitalize text-info">
                                {{user.navigation.currentArea.name}} / {{user.navigation.currentLocation.name}} / {{user.navigation.currentRoom.name}}
                            </h3>
                        </div>
                        <div class="row">
                            <div class="col-xs-3"><button type="button" class="btn btn-block" data-ng-click="submit('explore')"><img class="img-responsive" src="/Images/public/icon/scroll-unfurled.png" /></button></div>
                            <div class="col-xs-3"><button type="button" class="btn btn-block" data-ng-click="submit('rest')"><img class="img-responsive" src="/Images/public/icon/bed.png"/></button></div>
                            <div class="col-xs-3"><button type="button" class="btn btn-block" data-ng-click="submit('whereami')">Where Am I?</button></div>
                            <div class="col-xs-3"><button type="button" class="btn btn-block" data-ng-click="do('quest', 'start')"><img class="img-responsive" src="/Images/public/icon/tied-scroll.png"/></button></div>
                        </div>
                        <div class="row">
                            <h3>Available Areas</h3>
                            <div class="col-sm-3" data-ng-show="user.navigation.currentLocation.isExit">
                                <div style="cursor: pointer" data-ng-click="do('go', area)" ng-repeat="area in temphcodeareas">
                                    {{area}}
                                </div>
                            </div>
                            <p data-ng-hide="user.navigation.currentLocation.isExit">
                                You are not in a Location where you may travel to new Areas.
                            </p>
                        </div>
                        <div class="row">
                            <h3>Available Locations</h3>
                            <div class="col-sm-3">
                                <div style="cursor: pointer" data-ng-click="do('go', location.name)" ng-repeat="location in user.navigation.currentArea.locations" ng-class="{market: location.hasMarket, exit: location.isExit}">
                                    {{location.name}}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <h3>Available Rooms</h3>
                            <button data-ng-show="user.navigation.currentRoom.isExit" type="button" class="btn" data-ng-click="do('exit', '')"><img class="img-responsive" src="/Images/public/icon/exit-door.png"/></button>
                            <div class="col-sm-3">
                                <div style="cursor: pointer" data-ng-click="do('go', room.name)" ng-repeat="room in user.navigation.currentLocation.rooms" ng-class="{entrance: room.isExit}">
                                    {{room.name}}
                                </div>
                            </div>
                        </div>
                    </div>
                </uib-tab>
                <uib-tab>
                    <uib-tab-heading>
                        <img class="img-responsive" src="/Images/public/icon/swap-bag.png" /> Inventory
                    </uib-tab-heading>
                    <div class="container-fluid">
                        <div class="row">
                            <div><button type="button" class="btn btn-block" data-ng-click="submit('quest')">Current Quests</button></div>
                            <h3>Equipment</h3>
                            <div><img class="img-responsive" src="/Images/public/icon/gold-bar.png"/> {{user.inventory.gold}}</div>
                            <div style="cursor: pointer" ng-click="do('unequip', user.equipment.head.name)"><img class="img-responsive" src="/Images/public/icon/crested-helmet.png"/> {{user.equipment.head.name}}</div>
                            <div style="cursor: pointer" ng-click="do('unequip', user.equipment.torso.name)"><img class="img-responsive" src="/Images/public/icon/armor-vest.png" />{{user.equipment.torso.name}}</div>
                            <div style="cursor: pointer" ng-click="do('unequip', user.equipment.arm.name)"><img class="img-responsive" src="/Images/public/icon/shield.png" />{{user.equipment.arm.name}}</div>
                            <div style="cursor: pointer" ng-click="do('unequip', user.equipment.legs.name)"><img class="img-responsive" src="/Images/public/icon/armored-pants.png" />{{user.equipment.legs.name}}</div>
                            <div style="cursor: pointer" ng-click="do('unequip', user.equipment.feet.name)"><img class="img-responsive" src="/Images/public/icon/boots.png" />{{user.equipment.feet.name}}</div>
                            <div style="cursor: pointer" ng-click="do('unequip', user.equipment.weapon.name)"><img class="img-responsive" src="/Images/public/icon/plain-dagger.png" />{{user.equipment.weapon.name}}</div>
                        </div>
                        <div class="row">
                            <h3>Spells</h3>
                            <div class="col-sm-3" data-ng-click="do('cast', iter.name)" uib-tooltip-template="'invTooltipTemplate.html'" tooltip-placement="bottom" ng-repeat="iter in user.spells">
                                {{iter.name}}
                            </div>
                        </div>
                        <div class="row">
                            <h3>Armor</h3>
                            <div class="col-sm-3" data-ng-click="do('equip', iter.name)" uib-tooltip-template="'invTooltipTemplate.html'" tooltip-placement="bottom" ng-repeat="iter in user.inventory.armors track by $index">
                                {{iter.name}}
                            </div>
                        </div>
                        <div class="row">
                            <h3>Weapons</h3>
                            <div class="col-sm-3" data-ng-click="do('equip', iter.name)" uib-tooltip-template=" 'invTooltipTemplate.html' " tooltip-placement=" bottom" ng-repeat="iter in user.inventory.weapons track by $index">
                                {{iter.name}}
                            </div>
                        </div>
                        <div class="row">
                            <h3>Potions</h3>
                            <div class="col-sm-3" data-ng-click="do('use', iter.name)" uib-tooltip-template=" 'invTooltipTemplate.html' " tooltip-placement=" bottom" ng-repeat="iter in user.inventory.potions track by $index">
                                {{iter.name}}
                            </div>
                        </div>
                        <div class="row">
                            <h3>Relics</h3>
                            <div class="col-sm-3" uib-tooltip-template="'invTooltipTemplate.html'" tooltip-placement="bottom" ng-repeat="iter in user.inventory.relics track by $index">
                                {{iter.name}}
                            </div>
                        </div>
                    </div>
                </uib-tab>
                <uib-tab>
                    <uib-tab-heading>
                        <img class="img-responsive" src="/Images/public/icon/quill.png" /> Chat
                    </uib-tab-heading>
                    <div class="container-fluid">
                        <form class="form-horizontal" data-ng-submit="chat(data); data='';">
                            <input class="col-xs-10 form-control" type="text" ng-model="data" required />
                            <button class="col-xs-2 btn " type="submit" ng-disabled="$invalid">Say</button>
                        </form>
                    </div>
                </uib-tab>
                <uib-tab data-ng-show="user.navigation.currentLocation.hasMarket">
                    <uib-tab-heading>
                        <img class="img-responsive" src="/Images/public/icon/knapsack.png" /> Shop
                    </uib-tab-heading>
                    <div class="container-fluid">
                        <button type="button" class="btn" data-ng-click="submit('buy')">Ask for Shopkeeper's Inventory</button>
                        <form class="form-horizontal" data-ng-submit="do('buy', buydata); buydata='';">
                            <input class="col-xs-10 form-control" type="text" ng-model="buydata" required />
                            <button class="col-xs-2 btn " type="submit" ng-disabled="$invalid">Buy</button>
                        </form>
                    </div>
                </uib-tab>
            </uib-tabset>
        </div>
    </div>
</div>
<script type="text/ng-template" id="invTooltipTemplate.html">
    <ul data-ng-if="iter != undefined">
        <li style="text-align:left" data-ng-repeat="i in propertyList(iter)">
            {{i}}
        </li>
    </ul>
</script>
